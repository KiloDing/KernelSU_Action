# 内核来源
KERNEL_SOURCE=https://github.com/MiCode/Xiaomi_Kernel_OpenSource
KERNEL_SOURCE_BRANCH=pipa-t-oss  # 注意：仓库用 KERNEL_SOURCE_BRANCH 而非 KERNEL_BRANCH

# 内核配置（官方路径）
KERNEL_CONFIG=arch/arm64/configs/pipa_user_defconfig

# 架构与镜像名
ARCH=arm64
KERNEL_IMAGE_NAME=Image.gz-dtb

# 使用自定义 Clang（Neutron-Clang，绕过官方下载问题）
Use custom clang=true
Custom Clang Source=https://github.com/Neutron-Clang/neutron-clang.git
Clang Branch=main

# 全 LLVM 编译
EXTRA_CMDS=LLVM=1 LLVM_IAS=1

# KernelSU（non-GKI 用 v0.9.5）
ENABLE_KERNELSU=true
KERNELSU_TAG=v0.9.5
APPLY_KSU_PATCH=true  # 注意：仓库用 APPLY_KSU_PATCH 而非 APPLY_KERNELSU_PATCH
ADD_KPROBES_CONFIG=true
ADD_OVERLAYFS_CONFIG=true

# 优化
ENABLE_CCACHE=true
REMOVE_UNUSED_PACKAGES=true
DISABLE-LTO=false
DISABLE_CC_WERROR=false

# AnyKernel3（默认即可）
USE_CUSTOM_ANYKERNEL3=false

# DTBO（pipa 不需要）
NEED_DTBO=false

# 打包 boot.img（可选，需提供股票 boot.img 直链）
BUILD_BOOT_IMG=false
