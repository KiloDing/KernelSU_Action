KERNEL_SOURCE=https://github.com/MiCode/Xiaomi_Kernel_OpenSource.git
KERNEL_BRANCH=pipa-t-oss
KERNEL_CONFIG=pipa_user_defconfig   # pipa 源码确认存在此文件
ARCH=arm64
KERNEL_IMAGE_NAME=Image.gz-dtb      # pipa/sm8250 标准输出

# 2025 年最新 AOSP Clang（Clang 20.0.0，官方最新稳定版）
CLANG_VERSION=r547379
CLANG_BRANCH=main                   # 必须设置！否则下载链接为空导致 404

ENABLE_GCC_64=true                  # 混合编译必需
ENABLE_GCC_32=true

EXTRA_CMDS=LLVM=1 LLVM_IAS=1        # Clang 标准旗标

ENABLE_KERNELSU=true
KERNELSU_TAG=v0.9.5                 # 非 GKI 兼容的最后官方版（推荐稳妥）
ADD_KPROBES_CONFIG=true
ADD_OVERLAYFS_CONFIG=true
APPLY_KERNELSU_PATCH=true           # 推荐启用，便于自动处理补丁

DISABLE_LTO=true                    # 新 Clang 强烈推荐禁用，避免潜在错误
DISABLE_CC_WERROR=true              # 忽略警告转错误
ENABLE_CCACHE=true                  # 加速二次编译
REMOVE_UNUSED_PACKAGES=true         # 清理磁盘空间

CUSTOM_ANYKERNEL3_SOURCE=https://github.com/osm0sis/AnyKernel3.git
ANYKERNEL3_BRANCH=master

BUILD_BOOT_IMG=false                # 不打包 boot.img（只生成 AnyKernel3 zip）
# SOURCE_BOOT_IMAGE=...             # 已禁用打包，无需设置（可删除或注释）

NEED_DTBO=true                      # pipa 平板通常需要 dtbo.img（建议保留）
