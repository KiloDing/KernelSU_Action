KERNEL_SOURCE=https://github.com/MiCode/Xiaomi_Kernel_OpenSource.git
KERNEL_BRANCH=pipa-t-oss
KERNEL_CONFIG=pipa_user_defconfig   # 如果日志报错，试 pipa_defconfig
ARCH=arm64
KERNEL_IMAGE_NAME=Image.gz-dtb

# 用 Proton-Clang（master 最新，完美兼容 pipa）
CUSTOM_CLANG_SOURCE=https://github.com/kdrag0n/proton-clang.git
# CUSTOM_CLANG_BRANCH=master   # 可选，不写默认 master

# 必须注释掉以下，避免优先用失效的 AOSP 旧版！
# CLANG_VERSION=r450784d
# CLANG_BRANCH=master

ENABLE_GCC_64=true
ENABLE_GCC_32=true

EXTRA_CMDS=LLVM=1 LLVM_IAS=1

ENABLE_KERNELSU=true
KERNELSU_TAG=v0.9.5
ADD_KPROBES_CONFIG=true
ADD_OVERLAYFS_CONFIG=true
APPLY_KERNELSU_PATCH=true

DISABLE_LTO=true
DISABLE_CC_WERROR=true
ENABLE_CCACHE=true
REMOVE_UNUSED_PACKAGES=true

CUSTOM_ANYKERNEL3_SOURCE=https://github.com/osm0sis/AnyKernel3.git
ANYKERNEL3_BRANCH=master

BUILD_BOOT_IMG=true   # 修正：必须是 true（不是 flash）
SOURCE_BOOT_IMAGE=https://your-real-stock-boot.img-link   # 替换成真实直链（从官方 ROM 提取 boot.img）
NEED_DTBO=true
