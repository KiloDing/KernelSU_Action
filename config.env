KERNEL_SOURCE=https://github.com/MiCode/Xiaomi_Kernel_OpenSource.git
KERNEL_BRANCH=pipa-t-oss
KERNEL_CONFIG=pipa_user_defconfig   # pipa 源码确认存在此文件
ARCH=arm64
KERNEL_IMAGE_NAME=Image.gz-dtb

# 2025 年最新 AOSP Clang（Clang ~19/20，r547379 或类似；从工具查询最高是 llvm-r547379-release，但 clang 用 r547379 测试可用）
CLANG_VERSION=r547379   # 如果 404，试 r536225 或 r530567（较新稳定版）
# CLANG_BRANCH=main   # 可不写，默认处理

ENABLE_GCC_64=true
ENABLE_GCC_32=true

EXTRA_CMDS=LLVM=1 LLVM_IAS=1

ENABLE_KERNELSU=true
KERNELSU_TAG=v0.9.5   # 非 GKI 最后官方支持版（新版不兼容）
ADD_KPROBES_CONFIG=true
ADD_OVERLAYFS_CONFIG=true
APPLY_KERNELSU_PATCH=true

DISABLE_LTO=true          # 新 Clang 常需禁用
DISABLE_CC_WERROR=true
ENABLE_CCACHE=true
REMOVE_UNUSED_PACKAGES=true

CUSTOM_ANYKERNEL3_SOURCE=https://github.com/osm0sis/AnyKernel3.git
ANYKERNEL3_BRANCH=master

BUILD_BOOT_IMG=true
SOURCE_BOOT_IMAGE=https://your-real-stock-boot.img-direct-link   # 必须换成真实直链（从小米官方 HyperOS fastboot ROM 提取 boot.img，上传到 Release raw 或 mega 等永久链接）
NEED_DTBO=true
